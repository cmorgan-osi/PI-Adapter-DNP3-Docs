<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Install OSIsoft Adapter for DNP3 using Docker </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Install OSIsoft Adapter for DNP3 using Docker ">
    <meta name="generator" content="docfx 2.54.0.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../V1/index.html" width="46">
                <img id="logo" src="../../V1/main/V1/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge System"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="InstallOSIsoftAdapterForDNP3UsingDocker">
<h1 id="install-osisoft-adapter-for-dnp3-using-docker" sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="5" sourceendlinenumber="5">Install OSIsoft Adapter for DNP3 using Docker</h1>

<p sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="7" sourceendlinenumber="7">Docker is a set of tools that can be used on Linux to manage application deployments. If you want to use Docker, you must be familiar with the underlying technology and have determined that it is appropriate for your planned use of the DNP3 Adapter. Docker is not a requirement to use DNP3 Adapter.</p>
<p sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="9" sourceendlinenumber="9">This topic provides examples of how to create a Docker container with the DNP3 Adapter. </p>
<h2 id="create-a-startup-script-for-the-adapter" sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="11" sourceendlinenumber="11">Create a startup script for the Adapter</h2>
<p sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="13" sourceendlinenumber="14">Using the text editor of your choice, create a script similar to the following and put it in the directory
where you plan to create the container. The script varies slightly by processor. Name the dnp3dockerstart.sh.</p>
<h3 id="arm32" sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="16" sourceendlinenumber="16">ARM32</h3>
<pre sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="18" sourceendlinenumber="51"><code class="lang-bash">#!/bin/sh
#local variables
defaultPort=5590
#regexp to only accept numerals
re=&#39;^[0-9]+$&#39;

portConfigFile=&quot;/DNP3_linux-arm/appsettings.json&quot;

#validate the port number input
if [ -z $portnum ] ; then
    portnum=${defaultPort} 
    echo &quot;Default value selected.&quot; ;
else
    echo $portnum | grep -q -E $re
    isNum=$?
    if [ $isNum -ne 0 ] || [ $portnum -le 1023 ] || [ $portnum -gt 49151 ] ; then
        echo &quot;Invalid input. Setting default value ${defaultPort} instead...&quot;
        portnum=${defaultPort} ;
    fi
fi

echo &quot;configuring port ${portnum}&quot;
#write out the port config file
cat &gt; ${portConfigFile} &lt;&lt; EOF
{
  &quot;ApplicationSettings&quot;: {
    &quot;Port&quot;: ${portnum},
    &quot;ApplicationDataDirectory&quot;: &quot;/usr/share/OSIsoft/Adapters/DNP3/DNP3&quot;
  }
}
EOF
exec /DNP3_linux-arm/OSIsoft.Data.System.Host
</code></pre><h3 id="arm64" sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="53" sourceendlinenumber="53">ARM64</h3>
<pre sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="55" sourceendlinenumber="88"><code class="lang-bash">#!/bin/sh
#local variables
defaultPort=5590
#regexp to only accept numerals
re=&#39;^[0-9]+$&#39;

portConfigFile=&quot;/DNP3_linux-arm64/appsettings.json&quot;

#validate the port number input
if [ -z $portnum ] ; then
    portnum=${defaultPort} 
    echo &quot;Default value selected.&quot; ;
else
    echo $portnum | grep -q -E $re
    isNum=$?
    if [ $isNum -ne 0 ] || [ $portnum -le 1023 ] || [ $portnum -gt 49151 ] ; then
        echo &quot;Invalid input. Setting default value ${defaultPort} instead...&quot;
        portnum=${defaultPort} ;
    fi
fi

echo &quot;configuring port ${portnum}&quot;
#write out the port config file
cat &gt; ${portConfigFile} &lt;&lt; EOF
{
  &quot;ApplicationSettings&quot;: {
    &quot;Port&quot;: ${portnum},
    &quot;ApplicationDataDirectory&quot;: &quot;/usr/share/OSIsoft/Adapters/DNP3/DNP3&quot;
  }
}
EOF
exec /DNP3_linux-arm64/OSIsoft.Data.System.Host
</code></pre><h3 id="amd64" sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="90" sourceendlinenumber="90">AMD64</h3>
<pre sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="92" sourceendlinenumber="125"><code class="lang-bash">#!/bin/sh
#local variables
defaultPort=5590
#regexp to only accept numerals
re=&#39;^[0-9]+$&#39;

portConfigFile=&quot;/DNP3_linux-x64/appsettings.json&quot;

#validate the port number input
if [ -z $portnum ] ; then
    portnum=${defaultPort} 
    echo &quot;Default value selected.&quot; ;
else
    echo $portnum | grep -q -E $re
    isNum=$?
    if [ $isNum -ne 0 ] || [ $portnum -le 1023 ] || [ $portnum -gt 49151 ] ; then
        echo &quot;Invalid input. Setting default value ${defaultPort} instead...&quot;
        portnum=${defaultPort} ;
    fi
fi

echo &quot;configuring port ${portnum}&quot;
#write out the port config file
cat &gt; ${portConfigFile} &lt;&lt; EOF
{
  &quot;ApplicationSettings&quot;: {
    &quot;Port&quot;: ${portnum},
    &quot;ApplicationDataDirectory&quot;: &quot;/usr/share/OSIsoft/Adapters/DNP3/DNP3&quot;
  }
}
EOF
exec /DNP3_linux-x64/OSIsoft.Data.System.Host
</code></pre><h2 id="create-a-docker-container-containing-the-dnp3-adapter" sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="127" sourceendlinenumber="127">Create a Docker container containing the DNP3 Adapter</h2>
<ol sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="129" sourceendlinenumber="129">
<li sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="129" sourceendlinenumber="129">Create the following Dockerfile in the directory where you want to create and run the container. Dockerfile is the required name of the file, and which variation you will use depends on the operating system you are using:</li>
</ol>
<h3 id="arm32-1" sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="131" sourceendlinenumber="131">ARM32</h3>
<pre sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="133" sourceendlinenumber="141"><code class="lang-bash">FROM ubuntu
WORKDIR /
RUN apt-get update &amp;&amp; DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends libicu60 libssl1.0.0
COPY dnp3dockerstart.sh /
RUN chmod +x /dnp3dockerstart.sh
ADD ./DNP3_linux-arm.tar.gz .
ENTRYPOINT [&quot;/dnp3dockerstart.sh&quot;]
</code></pre><h3 id="arm64-1" sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="142" sourceendlinenumber="142">ARM64</h3>
<pre sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="144" sourceendlinenumber="152"><code class="lang-bash">FROM ubuntu
WORKDIR /
RUN apt-get update &amp;&amp; DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends libicu60 libssl1.0.0
COPY dnp3dockerstart.sh /
RUN chmod +x /dnp3dockerstart.sh
ADD ./DNP3_linux-arm64.tar.gz .
ENTRYPOINT [&quot;/dnp3dockerstart.sh&quot;]
</code></pre><h3 id="amd64-x64" sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="154" sourceendlinenumber="154">AMD64 (x64)</h3>
<pre sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="156" sourceendlinenumber="164"><code class="lang-bash">FROM ubuntu
WORKDIR /
RUN apt-get update &amp;&amp; DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends libicu60 libssl1.0.0
COPY dnp3dockerstart.sh /
RUN chmod +x /dnp3dockerstart.sh
ADD ./DNP3_linux-x64.tar.gz .
ENTRYPOINT [&quot;/dnp3dockerstart.sh&quot;]
</code></pre><ol sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="166" sourceendlinenumber="168">
<li sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="166" sourceendlinenumber="166"><p sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="166" sourceendlinenumber="166">Copy the appropriate DNP3_linux-(x64, arm, or arm64 depending upon platform).tar.gz file to the same directory as the Dockerfile.</p>
</li>
<li sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="168" sourceendlinenumber="168"><p sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="168" sourceendlinenumber="168">Run the following command line in the same directory (sudo may be necessary):</p>
</li>
</ol>
<pre sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="170" sourceendlinenumber="172"><code class="lang-bash">docker build -t dnp3adapter .
</code></pre><h2 id="run-the-dnp3-adapter-docker-containers" sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="174" sourceendlinenumber="174">Run the DNP3 Adapter Docker containers</h2>
<h3 id="rest-access-from-the-local-machine-from-docker" sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="176" sourceendlinenumber="176">REST access from the local machine from Docker</h3>
<p sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="178" sourceendlinenumber="178">Complete the following to run the container:</p>
<ol sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="180" sourceendlinenumber="181">
<li sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="180" sourceendlinenumber="180">Open command line.</li>
<li sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="181" sourceendlinenumber="181">Type the following in the command line (sudo may be necessary):</li>
</ol>
<pre sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="183" sourceendlinenumber="185"><code class="lang-bash">docker run -d --network host dnp3adapter
</code></pre><p sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="187" sourceendlinenumber="187">Port 5590 is accessible from the host and you can make REST calls to DNP3 Adapter from applications on the local host computer. In this example, all data stored by the DNP3 Adapter is stored in the container itself. When the container is deleted, the data stored is also deleted.</p>
<h3 id="persistent-storage-on-the-local-file-system-from-docker" sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="189" sourceendlinenumber="189">Persistent storage on the local file system from Docker</h3>
<p sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="191" sourceendlinenumber="191">Complete the following to run the container:</p>
<ol sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="193" sourceendlinenumber="194">
<li sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="193" sourceendlinenumber="193">Open a terminal window.</li>
<li sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="194" sourceendlinenumber="194">Type the following in the command line (sudo may be necessary):</li>
</ol>
<pre sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="196" sourceendlinenumber="198"><code class="lang-bash">docker run -d --network host -v /dnp3:/usr/share/OSIsoft/ dnp3adapter
</code></pre><p sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="200" sourceendlinenumber="200">Port 5590 is accessible from the host and you can make REST calls to DNP3 Adapter from applications on the local host computer. In this example, all data that would be written to the container is instead written to the host directory. In this example the host directory is a directory on the local machine, /dnp3. You can specify any directory.</p>
<h3 id="port-number-change" sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="202" sourceendlinenumber="202">Port number change</h3>
<p sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="204" sourceendlinenumber="205">To use a different port other than 5590 you can specify a portnum variable on the docker run command line. For example, in order to 
start up the adapter using port 6000 instead of 5590 you would use the command line:</p>
<pre sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="207" sourceendlinenumber="209"><code class="lang-bash">docker run -d -e portnum=6000 --network host dnp3adapter
</code></pre><p sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="211" sourceendlinenumber="212">Then instead of accessing the REST API using port 5590 you would use port 6000. The following curl command would return 
the configuration for the container.</p>
<pre sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="214" sourceendlinenumber="216"><code class="lang-bash">curl http://localhost:6000/api/v1/configuration
</code></pre><h3 id="limiting-local-host-access-to-docker" sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="218" sourceendlinenumber="218">Limiting local host access to Docker</h3>
<p sourcefile="V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md" sourcestartlinenumber="220" sourceendlinenumber="220">If you remove the <code>--network host</code> option from the docker run command, no REST access is possible from outside the container. This may be of value where you want to host an application in the same container as DNP3 Adapter, and do not want to have external REST access enabled.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/OSIsoft-Adapter-DNP3-Docs/blob/master/V1/Installation/Install OSIsoft Adapter for DNP3 using Docker.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
            <span id='copyright-text'>© 2020 - OSIsoft, LLC.<span>
        </span></span></div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
