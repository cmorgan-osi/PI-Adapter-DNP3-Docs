<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Egress endpoints configuration </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Egress endpoints configuration ">
    <meta name="generator" content="docfx 2.54.0.0">
    
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../toc.html">
    
    <meta property="docfx:rel" content="../../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../../../V1/index.html" width="46">
                <img id="logo" src="../../../../V1/main/V1/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge System"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="EgressEndpointsConfiguration">
<h1 id="egress-endpoints-configuration" sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="5" sourceendlinenumber="5">Egress endpoints configuration</h1>

<p sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="7" sourceendlinenumber="7">Adapters can egress dynamic data to destinations that you supply through OMF. OSIsoft Cloud Services (OCS) and PI servers through PI Web API are supported destinations.</p>
<p sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="9" sourceendlinenumber="9">An egress endpoint represents a destination to which data is sent. You can specify multiple endpoints. Every egress endpoint is run independently of all other egress endpoints and is expected to accept OMF messages. An egress endpoint is comprised of the properties specified under <a href="#egress-endpoint-parameters" data-raw-source="[Egress endpoint parameters](#egress-endpoint-parameters)" sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="9" sourceendlinenumber="9">Egress endpoint parameters</a>.</p>
<h2 id="configure-egress-endpoints" sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="11" sourceendlinenumber="11">Configure egress endpoints</h2>
<p sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="13" sourceendlinenumber="13"><strong>Note:</strong> You cannot add egress configurations manually because some parameters are encrypted when stored to disk. You must use the REST endpoints to add or edit egress configuration. For additional endpoint configurations, see <a href="#rest-urls" data-raw-source="[REST URLs](#rest-urls)" sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="13" sourceendlinenumber="13">REST URLs</a>.</p>
<p sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="15" sourceendlinenumber="15">Complete the following steps to configure egress endpoints:</p>
<ol sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="17" sourceendlinenumber="57">
<li sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="17" sourceendlinenumber="19"><p sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="17" sourceendlinenumber="17">Using any text editor, create a file that contains one or more egress endpoints in the JSON format.</p>
<ul sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="18" sourceendlinenumber="19">
<li sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="18" sourceendlinenumber="18">For content structure, see <a href="#examples" data-raw-source="[Examples](#examples)" sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="18" sourceendlinenumber="18">Examples</a>.</li>
<li sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="19" sourceendlinenumber="19">For a table of all available parameters, see <a href="#egress-endpoint-parameters" data-raw-source="[Egress endpoint parameters](#egress-endpoint-parameters)" sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="19" sourceendlinenumber="19">Egress endpoint parameters</a>.</li>
</ul>
</li>
<li sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="21" sourceendlinenumber="21"><p sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="21" sourceendlinenumber="21">Save the file. For example, <em>OmfEgress_DataEndpoints.json</em>.</p>
</li>
<li sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="23" sourceendlinenumber="57"><p sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="23" sourceendlinenumber="23">Use any of the <a class="xref" href="Configuration%20tools.html" data-raw-source="[Configuration tools](xref:ConfigurationTools)" sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="23" sourceendlinenumber="23">Configuration tools</a> capable of making HTTP requests and run the appropriate command with the contents of that file to the following endpoint: <code>http://localhost:5590/api/v1/configuration/OmfEgress/dataendpoints/</code></p>
<p sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="25" sourceendlinenumber="25"> <strong>Note:</strong> <code>5590</code> is the default port number. If you selected a different port number, replace it with that value.</p>
<p sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="27" sourceendlinenumber="27"> Examples using <code>curl</code>:</p>
<p sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="29" sourceendlinenumber="29"> <strong>Note:</strong> Run the commands from the same directory where the file is located.</p>
<ul sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="31" sourceendlinenumber="57">
<li sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="31" sourceendlinenumber="39"><p sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="31" sourceendlinenumber="31"><em>Add endpoints</em></p>
<pre sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="33" sourceendlinenumber="35"><code class="lang-bash">curl -d &quot;@OmfEgress_DataEndpoints.json&quot; -H &quot;Content-Type: application/json&quot; -X POST    &quot;http://localhost:5590/api/v1/configuration/OmfEgress/dataendpoints&quot;
</code></pre><pre sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="37" sourceendlinenumber="39"><code class="lang-bash">curl -d &quot;@OmfEgress_DataEndpoints.json&quot; -H &quot;Content-Type: application/json&quot; -X PUT   &quot;http://localhost:5590/api/v1/configuration/OmfEgress/dataendpoints/{Id}&quot;
</code></pre></li>
<li sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="41" sourceendlinenumber="45"><p sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="41" sourceendlinenumber="41"><em>Delete an endpoint</em></p>
<pre sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="43" sourceendlinenumber="45"><code class="lang-bash">curl -X DELETE &quot;http://localhost:5590/api/v1/configuration/OmfEgress/dataendpoints/{Id}&quot;
</code></pre></li>
<li sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="47" sourceendlinenumber="51"><p sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="47" sourceendlinenumber="47"><em>Update an endpoint</em></p>
<pre sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="49" sourceendlinenumber="51"><code class="lang-bash">curl -d &quot;@OmfEgress_DataEndpoints.json&quot; -H &quot;Content-Type: application/json&quot; -X UPDATE     &quot;http://localhost:5590/api/v1/configuration/OmfEgress/dataendpoints/{Id}&quot;
</code></pre></li>
<li sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="53" sourceendlinenumber="57"><p sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="53" sourceendlinenumber="53"><em>View endpoints</em></p>
<pre sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="55" sourceendlinenumber="57"><code class="lang-bash">curl -X GET &quot;http://localhost:5590/api/v1/configuration/OmfEgress/DataEndpoints&quot;
</code></pre></li>
</ul>
</li>
</ol>
<h2 id="egress-endpoint-configuration-schema" sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="59" sourceendlinenumber="59">Egress endpoint configuration schema</h2>
<p sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="61" sourceendlinenumber="61">The full schema definition for the egress endpoint configuration is in the <em>OmfEgress_DataEndpoints_schema.json</em>  file located in one of the folders listed below:</p>
<p sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="63" sourceendlinenumber="63">Windows: <em>%ProgramFiles%\OSIsoft\Adapters\AdapterName\Schemas</em></p>
<p sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="65" sourceendlinenumber="65">Linux: <em>/opt/OSIsoft/Adapters/AdapterName/Schemas</em></p>
<h2 id="egress-endpoint-parameters" sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="67" sourceendlinenumber="67">Egress endpoint parameters</h2>
<p sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="69" sourceendlinenumber="69">The following parameters are available for configuring egress endpoints:</p>
<table sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="71" sourceendlinenumber="80">
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Id</strong></td>
<td>Optional</td>
<td><code>string</code></td>
<td>Unique identifier</td>
</tr>
<tr>
<td><strong>Endpoint</strong></td>
<td>Required</td>
<td><code>string</code></td>
<td>Destination that accepts OMF v1.1 messages. Supported destinations include OCS and PI Server.</td>
</tr>
<tr>
<td><strong>Username</strong></td>
<td>Required for PI endpoint</td>
<td><code>string</code></td>
<td>Basic authentication to the PI Web API OMF endpoint</td>
</tr>
<tr>
<td><strong>Password</strong></td>
<td>Required for PI endpoint</td>
<td><code>string</code></td>
<td>Basic authentication to the PI Web API OMF endpoint</td>
</tr>
<tr>
<td><strong>ClientId</strong></td>
<td>Required for OCS endpoint</td>
<td><code>string</code></td>
<td>Authentication with the OCS OMF endpoint</td>
</tr>
<tr>
<td><strong>ClientSecret</strong></td>
<td>Required for OCS endpoint</td>
<td><code>string</code></td>
<td>Authentication with the OCS OMF endpoint</td>
</tr>
<tr>
<td><strong>TokenEndpoint</strong></td>
<td>Optional for OCS endpoint</td>
<td><code>string</code></td>
<td>Retrieves an OCS token from an alternative endpoint</td>
</tr>
<tr>
<td><strong>ValidateEndpointCertificate</strong></td>
<td>Optional</td>
<td><code>boolean</code></td>
<td>Disables verification of destination certificate. <strong>Note:</strong> Only use for testing with self-signed certificates. Defaults to true</td>
</tr>
</tbody>
</table>
<h2 id="examples" sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="82" sourceendlinenumber="82">Examples</h2>
<p sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="84" sourceendlinenumber="84">The following examples are valid egress configurations:</p>
<h3 id="egress-data-to-ocs" sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="86" sourceendlinenumber="86">Egress data to OCS</h3>
<pre sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="88" sourceendlinenumber="95"><code class="lang-json">[{
     &quot;Id&quot;: &quot;OCS&quot;,
     &quot;Endpoint&quot;: &quot;https://&lt;OCS OMF endpoint&gt;&quot;,
     &quot;ClientId&quot;: &quot;&lt;clientid&gt;&quot;,
     &quot;ClientSecret&quot;: &quot;&lt;clientsecret&gt;&quot;
}]
</code></pre><h3 id="egress-data-to-pi-web-api" sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="97" sourceendlinenumber="97">Egress data to PI Web API</h3>
<pre sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="99" sourceendlinenumber="106"><code class="lang-json">[{
     &quot;Id&quot;: &quot;PI Web API&quot;,
     &quot;Endpoint&quot;: &quot;https://&lt;pi web api server&gt;/piwebapi/omf/&quot;,
     &quot;UserName&quot;: &quot;&lt;username&gt;&quot;,
     &quot;Password&quot;: &quot;&lt;password&gt;&quot;
}]
</code></pre><h2 id="rest-urls" sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="108" sourceendlinenumber="108">REST URLs</h2>
<table sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="110" sourceendlinenumber="120">
<thead>
<tr>
<th>Relative URL</th>
<th>HTTP verb</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>api/v1/configuration/omfegress/DataEndpoints</td>
<td>GET</td>
<td>Gets all configured egress endpoints</td>
</tr>
<tr>
<td>api/v1/configuration/omfegress/DataEndpoints</td>
<td>DELETE</td>
<td>Deletes all configured egress endpoints</td>
</tr>
<tr>
<td>api/v1/configuration/omfegress/DataEndpoints</td>
<td>POST</td>
<td>Adds an array of egress endpoints or a single endpoint. Fails if any endpoint already exists</td>
</tr>
<tr>
<td>api/v1/configuration/omfegress/DataEndpoints</td>
<td>PUT</td>
<td>Replaces all egress endpoints</td>
</tr>
<tr>
<td>api/v1/configuration/omfegress/DataEndpoints</td>
<td>PATCH</td>
<td>Allows partial updating of configured endpoints.<br><strong>Note:</strong> The request must be an array containing one or more endpoints. Each endpoint in the array must include its <em>Id</em>.</td>
</tr>
<tr>
<td>api/v1/configuration/omfegress/DataEndpoints/{Id}</td>
<td>GET</td>
<td>Gets configured endpoint by <em>Id</em></td>
</tr>
<tr>
<td>api/v1/configuration/omfegress/DataEndpoints/{Id}</td>
<td>DELETE</td>
<td>Deletes configured endpoint by <em>Id</em></td>
</tr>
<tr>
<td>api/v1/configuration/omfegress/DataEndpoints/{Id}</td>
<td>PUT</td>
<td>Updates or creates a new endpoint with the specified <em>Id</em></td>
</tr>
<tr>
<td>api/v1/configuration/omfegress/DataEndpoints/{Id}</td>
<td>PATCH</td>
<td>Allows partial updating of configured endpoint by <em>Id</em></td>
</tr>
</tbody>
</table>
<h2 id="egress-execution-details" sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="122" sourceendlinenumber="122">Egress execution details</h2>
<ul sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="124" sourceendlinenumber="126">
<li sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="124" sourceendlinenumber="124">After configure an egress endpoint, egress is immediately run for that endpoint. Egress is handled individually per configured endpoint. On first execution, types and containers are egressed. After that only new or changed types or containers are egressed. Type creation must be successful in order to create containers. Container creation must be successful in order to egress data.</li>
<li sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="125" sourceendlinenumber="125">If you delete an egress endpoint, data flow immediately stops for that endpoint. Buffered data in a deleted endpoint is permanently lost.</li>
<li sourcefile="V1/main/V1/Configuration/Egress endpoints configuration.md" sourcestartlinenumber="126" sourceendlinenumber="126">Type, container, and data items are batched into one or more OMF messages when egressing. As per the requirements defined in OMF, a single message payload will not exceed 192KB in size. Compression is automatically applied to outbound egress messages. On the destination, failure to add a single item results in the message failing. Types, containers, and data are egressed as long as the destination continues to respond to HTTP requests.</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/OSIsoft-Adapter/blob/master/V1/Configuration/Egress endpoints configuration.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>© 2020 - OSIsoft, LLC.</span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
