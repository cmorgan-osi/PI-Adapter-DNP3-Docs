<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Configure endpoints </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Configure endpoints ">
    <meta name="generator" content="docfx 2.46.0.0">
    
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../../toc.html">
    
    <meta property="docfx:rel" content="../../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../../../V1/index.html" width="46">
                <img id="logo" src="../../../../V1/main/V1/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge System"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="ConfigureEndpoints">
<h1 id="configure-endpoints">Configure endpoints</h1>

<p>Adapters can egress dynamic data to destinations that you supply through OMF. Supported destinations are OSIsoft Cloud Services and PI servers through PI Web API.</p>
<p>An egress endpoint represents a destination to which data will be sent. You can specify multiple endpoints, and each egress endpoint, which is comprised of the properties specified in the <a href="#Parameters">Parameters</a> section, is executed independently of all other egress endpoints, and is expected to accept OMF messages.</p>
<blockquote><p><strong>Note:</strong> Some types, and consequently containers and data, cannot be egressed. See <a href="#egress-execution-details">Egress Execution Details</a> for more information.</p>
</blockquote>
<h2 id="configuration">Configuration</h2>
<h3 id="procedure">Procedure</h3>
<blockquote><p><strong>Note:</strong> You cannot add egress configurations manually, because some parameters are encrypted when stored to disk. You must use the REST endpoints to add/edit egress configuration. See <a href="#rest-urls">REST Urls</a> for additional endpoints.</p>
</blockquote>
<p>Complete the following to create new egress endpoints:</p>
<ol>
<li>Using any text editor, create a file that contains one or more egress endpoints in JSON form<ul>
<li>For content structure, see <a href="#Examples">Examples</a>.</li>
<li>For a table of all available egress parameters, see <a href="#Parameters">Parameters</a>.</li>
</ul>
</li>
<li>Save the file.</li>
<li>Use any tool capable of making HTTP requests to execute a POST command with the contents of that file to the following endpoint: <code>http://localhost:5590/api/v1/configuration/Egress/dataendpoints/</code></li>
</ol>
<p>Example using cURL:</p>
<ul>
<li><p>Add endpoints.</p>
<pre><code class="lang-bash">curl -v -d &quot;@Egress_DataEndpoints.config.json&quot; -H &quot;Content-Type: application/json&quot; -X POST &quot;http://localhost:5590/api/v1/configuration/Egress/dataendpoints&quot;
curl -v -d &quot;@Egress_DataEndpoints.config.json&quot; -H &quot;Content-Type: application/json&quot; -X PUT &quot;http://localhost:5590/api/v1/configuration/Egress/dataendpoints&quot;
</code></pre></li>
<li><p>Delete an endpoint</p>
<pre><code class="lang-bash">curl -v -X DELETE &quot;http://localhost:5590/api/v1/configuration/Egress/dataendpoints/{id}&quot;
</code></pre></li>
<li><p>Update an endpoint</p>
<pre><code class="lang-bash">curl -v -d &quot;@Egress_DataEndpoint.config.json&quot; -H &quot;Content-Type: application/json&quot; -X UPDATE &quot;http://localhost:5590/api/v1/configuration/Egress/dataendpoints/{id}&quot;
</code></pre></li>
<li><p>View endpoints.</p>
<pre><code class="lang-bash">curl -v -X GET &quot;http://localhost:5590/api/v1/configuration/Egress/DataEndpoints&quot;
</code></pre></li>
</ul>
<h3 id="parameters">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Id</strong></td>
<td>Required</td>
<td>string</td>
<td>Unique identifier</td>
</tr>
<tr>
<td><strong>Endpoint</strong></td>
<td>Required</td>
<td>string</td>
<td>Destination that accepts OMF v1.1 messages. Supported destinations include OCS and PI.</td>
</tr>
<tr>
<td><strong>ClientId</strong></td>
<td>Required for OCS endpoint</td>
<td>string</td>
<td>Used for authentication with the OCS OMF endpoint.</td>
</tr>
<tr>
<td><strong>ClientSecret</strong></td>
<td>Required for OCS endpoint</td>
<td>string</td>
<td>Used for authentication with the OCS OMF endpoint.</td>
</tr>
<tr>
<td><strong>TokenEndpoint</strong></td>
<td>Optional for OCS endpoint</td>
<td>string</td>
<td>Used to retrieve an OCS token from an alternative endpoint. <em>This is not normally necessary with OCS.</em></td>
</tr>
<tr>
<td><strong>Username</strong></td>
<td>Required for PI endpoint</td>
<td>string</td>
<td>Used for Basic authentication to the PI Web API OMF endpoint.</td>
</tr>
<tr>
<td><strong>Password</strong></td>
<td>Required for PI endpoint</td>
<td>string</td>
<td>Used for Basic authentication to the PI Web API OMF endpoint.</td>
</tr>
<tr>
<td><strong>ValidateEndpointCertificate</strong></td>
<td>Optional</td>
<td>bool</td>
<td>Used to disable verification of destination certificate. Use for testing only with self-signed certificates. Defaults to true.</td>
</tr>
</tbody>
</table>
<h3 id="examples">Examples</h3>
<p>Find various examples below of valid egress configurations.</p>
<p><strong>Egress data to OCS</strong></p>
<pre><code class="lang-json">[{
    &quot;Id&quot;: &quot;OCS&quot;,
    &quot;Endpoint&quot; : &quot; https://{IP/FQDN of OCS}/api/Tenants/{tenantId}/Namespaces/{namespaceId}/omf&quot;,
    &quot;ClientId&quot; : &quot;{clientId}&quot;,
    &quot;ClientSecret&quot; : &quot;{clientSecret}&quot;
}]
</code></pre><p><strong>Egress data to PI Web API.</strong></p>
<pre><code class="lang-json">[{
    &quot;Id&quot;: &quot;PI WebAPI&quot;,
    &quot;Endpoint&quot; : &quot; https://{IP/FQDN of WebApi}/piwebapi/omf&quot;,
    &quot;userName&quot; : &quot;{username}&quot;,
    &quot;Password&quot; : &quot;{password}&quot;
}]
</code></pre><h3 id="rest-urls">REST URLs</h3>
<table>
<thead>
<tr>
<th>Relative URL</th>
<th>HTTP verb</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>api/v1/configuration/egress/DataEndpoints</td>
<td>GET</td>
<td>Gets all configured egress endpoints</td>
</tr>
<tr>
<td>api/v1/configuration/egress/DataEndpoints</td>
<td>DELETE</td>
<td>Deletes all configured egress endpoints</td>
</tr>
<tr>
<td>api/v1/configuration/egress/DataEndpoints</td>
<td>POST</td>
<td>Add an array of egress endpoints or a single endpoint, will fail if any endpoint already exists</td>
</tr>
<tr>
<td>api/v1/configuration/egress/DataEndpoints</td>
<td>PUT</td>
<td>Replace all egress endpoints</td>
</tr>
<tr>
<td>api/v1/configuration/egress/DataEndpoints/{id}</td>
<td>GET</td>
<td>Get configured endpoint by <em>id</em></td>
</tr>
<tr>
<td>api/v1/configuration/egress/DataEndpoints/{id}</td>
<td>DELETE</td>
<td>Delete configured endpoint by <em>id</em></td>
</tr>
<tr>
<td>api/v1/configuration/egress/DataEndpoints/{id}</td>
<td>PUT</td>
<td>Replace egress endpoint by <em>id</em>, will fail if endpoint doesn&#39;t exist</td>
</tr>
<tr>
<td>api/v1/configuration/egress/DataEndpoints/{id}</td>
<td>PATCH</td>
<td>Allows partial updating of configured endpoint by <em>id</em></td>
</tr>
</tbody>
</table>
<h2 id="egress-execution-details">Egress execution details</h2>
<p>After you add configuration for an egress endpoint, egress execution will occur immediately for that endpoint. Egress is handled individually per configured endpoint. On first execution, types and containers will be egressed; subsequently only new or changed types/containers will be egressed. Type creation must be successful in order to perform container creation; likewise container creation must be successful in order to perform data egress.</p>
<p>If an egress endpoint is removed, data flow will immediately end for that endpoint. Any buffered data for the endpoint that has been deleted will be permanently lost.</p>
<p>Type, container, and data items are batched into one or more OMF messages when egressing. As per the requirements defined in OMF, a single message payload will not exceed 192KB in size. Compression is automatically applied to outbound egress messages. On the destination, failure to add a single item will result in the message failing. Types, containers, and data will continue to be egressed as long as the destination continues to respond to HTTP requests - retrying previous failures as needed.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/OSIsoft-Adapter/blob/master/V1/Configure the adapter/Configure endpoints.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
            <span id='copyright-text'>© 2019 - OSIsoft, LLC.<span>
        </span></span></div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
