<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>PI Adapter for DNP3 data selection configuration </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="PI Adapter for DNP3 data selection configuration ">
    <meta name="generator" content="docfx 2.55.0.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../V1/index.html" width="46">
                <img id="logo" src="../../V1/main/V1/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge System"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="PIAdapterForDNP3DataSelectionConfiguration">
<h1 id="pi-adapter-for-dnp3-data-selection-configuration">PI Adapter for DNP3 data selection configuration</h1>

<p>In addition to the data source configuration, you need to provide a data selection configuration to specify the data you want the DNP3 adapter to collect from your outstations.</p>
<p>Depending on your data source configuration, your data selection configuration may be pre-populated by discovery. For more information, see <a class="xref" href="PI%20Adapter%20for%20DNP3%20data%20source%20configuration.html">PI Adapter for DNP3 data source configuration</a> and <a class="xref" href="../PI%20Adapter%20for%20DNP3%20overview/PI%20Adapter%20for%20DNP3%20principles%20of%20operation.html#discovery">Discovery</a>.</p>
<h2 id="configure-dnp3-data-selection">Configure DNP3 data selection</h2>
<p>You cannot modify DNP3 data selection configurations manually. You must use the REST endpoints to add or edit the configuration.</p>
<p>Complete the following steps to configure the DNP3 data selection:</p>
<ol>
<li>Using any text editor, create a file that contains a DNP3 data selection in the JSON format.<ul>
<li>For content structure, see <a href="#dnp3-data-selection-examples">DNP3 data selection examples</a>.</li>
<li>For a table of all available parameters, see DNP3 data selection parameters.</li>
</ul>
</li>
<li>Save the file. For example, <code>DataSelection.config.json</code>.</li>
<li>Use any of the configuration tools capable of making HTTP requests to run either a <code>POST</code> or <code>PUT</code> command to their appropriate endpoint:</li>
</ol>
<p><strong>Note:</strong> The following examples use DNP3-1 as the adapter component name. For more information on how to add a component, see <a class="xref" href="../main/V1/Configuration/System%20components%20configuration.html">System components configuration</a>.</p>
<p><code>5590</code> is the default port number. If you selected a different port number, replace it with that value.</p>
<p><code>POST</code> endpoint: <code>http://localhost:5590/api/v1/configuration/&lt;componentID&gt;/DataSelection/</code></p>
<p>Example using <code>curl</code>:</p>
<p><strong>Note:</strong> Run this command from the same directory where the file is located.</p>
<pre><code class="lang-bash">curl -d &quot;@DataSelection.config.json&quot; -H &quot;Content-Type: application/json&quot; -X POST &quot;http://localhost:5590/api/v1/configuration/DNP3-1/DataSelection&quot;
</code></pre><h2 id="dnp3-data-selection-schema">DNP3 data selection schema</h2>
<p>The full schema definition for the DNP3 data source configuration is in the <code>DNP3_DataSource_schema.json</code> file located in one of the folders listed below:</p>
<p>Windows: <code>%ProgramFiles%\OSIsoft\Adapters\DNP3\Schemas</code></p>
<p>Linux: <code>/opt/OSIsoft/Adapters/DNP3/Schemas</code></p>
<h2 id="dnp3-data-selection-parameters">DNP3 data selection parameters</h2>
<p>The following parameters can be used to configure DNP3 data selection: </p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Selected</td>
<td>Optional</td>
<td><code>boolean</code></td>
<td>If true, data for this item will be collected and sent to the configured OMF endpoint(s). Default is <code>true</code>.</td>
</tr>
<tr>
<td>StreamId</td>
<td>Optional</td>
<td><code>string</code></td>
<td>The custom identifier used to create the streams. If not specified, the DNP3 adapter will generate a default value based on the <code>DefaultStreamIdPattern</code> in the <a class="xref" href="PI%20Adapter%20for%20DNP3%20data%20source%20configuration.html">data source configuration</a>.</td>
</tr>
<tr>
<td>Name</td>
<td>Optional</td>
<td><code>string</code></td>
<td>The optional friendly name of the data item collected from the data source. If not configured, the default value will be the Stream ID.</td>
</tr>
<tr>
<td>OutstationId</td>
<td>Required</td>
<td><code>string</code></td>
<td>The identifier of the outstation where the DNP point data should be collected from. Must match the <code>Id</code> of one of the configured outstations in the <a class="xref" href="PI%20Adapter%20for%20DNP3%20data%20source%20configuration.html">data source configuration</a>.</td>
</tr>
<tr>
<td>Group</td>
<td>Required</td>
<td><code>number</code></td>
<td>The DNP3 object group number for the point. For a list of supported objects, see <a class="xref" href="../PI%20Adapter%20for%20DNP3%20overview/PI%20Adapter%20for%20DNP3%20supported%20features.html">DNP3 supported features</a>.</td>
</tr>
<tr>
<td>Variation</td>
<td>Optional</td>
<td><code>number</code></td>
<td>The DNP3 object variation to be requested for the point during a static scan. The default is <code>0</code>. For a list of supported objects, see <a class="xref" href="../PI%20Adapter%20for%20DNP3%20overview/PI%20Adapter%20for%20DNP3%20supported%20features.html">DNP3 supported features</a>.</td>
</tr>
<tr>
<td>Index</td>
<td>Required</td>
<td><code>number</code></td>
<td>The index of the point on the outstation.</td>
</tr>
<tr>
<td>StaticScanScheduleId</td>
<td>Optional</td>
<td><code>string</code></td>
<td>The identifier of a schedule defined in the <a class="xref" href="../main/V1/Configuration/Schedules%20configuration.html">Schedules Configuration</a>. By default, no static scan will be configured. For more information, see the <a class="xref" href="../PI%20Adapter%20for%20DNP3%20overview/PI%20Adapter%20for%20DNP3%20principles%20of%20operation.html#StaticData">principles of operation</a> section.</td>
</tr>
<tr>
<td>DataFilterId</td>
<td>Optional</td>
<td><code>string</code></td>
<td>The identifier of a data filter defined in the <a class="xref" href="../main/V1/Configuration/Data%20filters%20configuration.html">data filters configuration</a>. By default, no filter will be applied.</td>
</tr>
</tbody>
</table>
<h2 id="dnp3-data-selection-example">DNP3 data selection example</h2>
<p>The following is an example of valid DNP3 data selection configuration. The first item is an example of a minimally configured selection item for a <code>Counter Input</code> point, the second item is an example of how an <code>Analog Input</code> point may be configured by <a class="xref" href="../PI%20Adapter%20for%20DNP3%20overview/PI%20Adapter%20for%20DNP3%20principles%20of%20operation.html#discovery">discovery</a>, and the last three items show an example of some custom configurations for different DNP3 points. You will notice that the second item is not selected, discovered items are not selected by default. </p>
<pre><code class="lang-json">[
    {
        &quot;outstationId&quot;: &quot;Outstation1&quot;,
        &quot;group&quot;: 20,
        &quot;index&quot;: 0
    },
    {
        &quot;selected&quot;: false,
        &quot;streamId&quot;: &quot;Outstation1.AnalogInput.7&quot;,
        &quot;name&quot;: null,
        &quot;outstationId&quot;: &quot;Outstation1&quot;,
        &quot;group&quot;: 30,
        &quot;variation&quot;: 0,
        &quot;index&quot;: 7,
        &quot;StaticScanScheduleId&quot;: null,
        &quot;dataFilterId&quot;: null
    },
    {
        &quot;streamId&quot;: &quot;Outstation1.BinaryInput.Variation2.3&quot;,
        &quot;name&quot;: &quot;MyBinaryInputPoint&quot;,
        &quot;outstationId&quot;: &quot;Outstation1&quot;,
        &quot;group&quot;: 1,
        &quot;variation&quot;: 2,
        &quot;index&quot;: 3,
        &quot;StaticScanScheduleId&quot;: &quot;schedule1&quot;,
        &quot;dataFilterId&quot;: &quot;DuplicateData&quot;
    },
    {
        &quot;name&quot;: &quot;MyDoubleBitBinaryInputPoint&quot;,
        &quot;outstationId&quot;: &quot;Outstation1&quot;,
        &quot;group&quot;: 3,
        &quot;index&quot;: 2,
        &quot;StaticScanScheduleId&quot;: &quot;schedule1&quot;,
        &quot;dataFilterId&quot;: &quot;DuplicateData&quot;
    },
    {
        &quot;name&quot;: &quot;MyOctetStringPoint&quot;,
        &quot;outstationId&quot;: &quot;Outstation1&quot;,
        &quot;group&quot;: 110,
        &quot;index&quot;: 1
    }
]
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/OSIsoft-Adapter-DNP3-Docs/blob/master/V1/Configuration/PI Adapter for DNP3 data selection configuration.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>© 2020 - OSIsoft, LLC.</span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
